<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Test</title>
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="manifest" href="assets/site.webmanifest">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="main.css" />
</head>

<body>
    <div class="container h-100">
        <div class="row h-100">
            <div class="col-sm-12 my-auto">
                <h1 class="text-center" style="margin-top: 30px" id="title">Welcome To the Conversation Test</h1>
                <div class="card border-light mb-3 description" id="description">
                    <div class="card-body text-dark text-center">
                        <p>This is a conversation test for the purpose of research
                            and conducted as part of a Master's dissertation from the
                            Quality and Usability Lab, Berlin, Germany to determine speech
                            quality assessment using conversation tests by CrowdSourcing approach.
                        </p>
                        <p>
                            The Test requires media permissions from browser,
                            so please allow microphone settings when prompted by the browser.
                            You will be taken to a page where you need to play an audio file
                            listen carefully and replay if required.

                            Please wear a headset, or headphones with an attached microphone. 
                            This is very important for the test. 
                        </p>
                        <p>
                            Please complete the <b>Qualification test</b> before moving onto the conversation test.
                        </p>
                    </div>
                    <div class="agree" id="agree">
                        <div class="text-center">
                            <span>
                                <input type="checkbox" name="terms" onclick="startQual1()">
                                <label for="terms" style="color:#337ab7">
                                    <a href="#" rel="noopener noreferrer">I agree to participate
                                        in the test and agree the to terms presented above</a>
                                </label>
                            </span>
                            <div>
                                <span>
                                    <input type="checkbox" name="headset" onclick="startQual2()">
                                    <label for="terms" style="color:#337ab7">
                                        <a href="#" rel="noopener noreferrer">I ensure that I am wearing a headset, or headphones with an attached microphone.</a>
                                    </label>
                                </span>
                            </div>
                            <div>
                                <span>
                                    <input type="checkbox" name="headset" onclick="startQual3()">
                                    <label for="terms" style="color:#337ab7">
                                        <a href="#" rel="noopener noreferrer">I consent to my audio signal being recorded and analysed for research purposes</a>
                                    </label>
                                </span>
                            </div>
                            <span class="start-test">
                                <button type="button" name="Start Test" id="start" disabled="disabled"
                                    class="btn btn-outline-success">
                                    Start Test
                                </button>
                            </span>

                        </div>
                    </div>
                </div>
                <div class="qualification_test" id="qualification_test">
                    <!-- <form id="question" class="qualification_form" onsubmit="return false">
                        <iframe src="./401_env/qual_and_setup.html" frameborder="0"
                            style="overflow:hidden;height:100%;width:100%" height="100%" width="100%"
                            class="qual-iframe"></iframe>
                        <div class="text-center"><button type="submit" id="answerButton" class="btn btn-outline-success"
                                onclick="answer()">Submit</button>
                        </div>
                    </form> -->
                    <form id="question" class="qualification_form" onsubmit="return false">
                        <h2>Qualification Test</h2>
                        <fieldset class="qualificationFieldset"><label>1.&nbsp;What is your gender?</label>
                            <div class="radio">
                                <label><input type="radio" name="1_gender" value="M" required> Male</label>
                            </div>
                            <div class="radio">
                                <label><input type="radio" name="1_gender" value="F"> Female</label>
                            </div>
                            <div class="radio disabled">
                                <label><input type="radio" name="1_gender" value="O"> Other</label>
                            </div>
                        </fieldset>
                        <fieldset class="qualificationFieldset"><label>2.&nbsp;In what year were you born? </label>
                            <div class="form-group">
                                <input type="text" class="form-control" name="2_birth_year" required>
                            </div>
                        </fieldset>

                        <fieldset class="qualificationFieldset"><label>3.&nbsp;What is your mother tongue? </label>
                            <div class="form-group">
                                <input type="text" class="form-control" name="3_mother_tongue" required>
                            </div>
                        </fieldset>
                        <fieldset class="setupFieldset">
                            <h3>Setup Test</h3>
                            <label>Please adjust the level of your computer to <b>a
                                    comfortable level</b> so
                                that you hear the following audio sample very well.</label>

                            <p> <span class="baudio" id="volume2">
                                <audio src="https://audiosamplesp808.blob.core.windows.net/p808-assets/clips/signal_level.wav" controls></audio>
                                </span>
                            </p>

                            <div class="alert alert-danger" role="alert">
                                <b>NOTE:</b> Missing this step can strongly affect quality of your answer.
                            </div>

                            <div class="alert alert-warning" role="alert">
                                After adjusting the level, you are not allowed to change the volume anymore. Otherwise
                                your response will be
                                rejected.
                            </div>
                        </fieldset>
                        <!-- Device Check -->

                        <div class="device-check">
                            <div>
                                <h3>
                                    <a data-target="#device_check">Listening device check</a>
                                </h3>
                            </div>
                            <div id="device_check">
                                <div>
                                    <b>Introduction</b>
                                    <p>We need to check your listening device. It is an automated test using your
                                        Web-browser functionality.
                                        Please click on <b>Start</b>.
                                        After that, you might see a popup message from your browser asking for allowance
                                        to
                                        use your
                                        microphone.
                                        Please click on <b>Allow</b> (on some of smartphones there will be no message).
                                        
                                    <div class="center" style="margin-bottom: 10px;">
                                        <button type="button" class="btn btn-primary center"
                                            onclick="startHeadsetCheck()">Start</button>
                                        <div id="status"> </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- Device Check ends-->
                        <button type="submit" id="answerButton" class="btn btn-outline-success"
                                onclick="answer()">Continue</button>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
        </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
        </script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/7.3.0/adapter.js"></script>
    <script type="text/javascript" src="app.js"></script>
</body>

</html>