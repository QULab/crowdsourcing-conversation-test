<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Test User to User</title>
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="manifest" href="assets/site.webmanifest">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="css/main.css" />
    <style type="text/css">
        html,
        body {
            height: 100%;
        }

        .full-page {
            height: 100vh;
            width: 100vw;
        }
    </style>
</head>

<body>
    <div id="container" class="container h-100">
        <div class="row h-100">
            <div class="col-12 ">

                <div class="toast started" role="alert" aria-live="assertive" aria-atomic="true" data-delay="8000"
                    data-animation="true">
                    <div class="toast-header">
                        User Joined!
                        <button type="button" class="close" data-dismiss="toast">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </div>

                <div class="toast connected" role="alert" aria-live="assertive" aria-atomic="true" data-delay="8000"
                    data-animation="true">
                    <div class="toast-header">
                        Call Connected!
                        <button type="button" class="close" data-dismiss="toast">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </div>

                <div>
                    <h1 style="text-align: center;">Conversation test</h1>
                    <div class="instructions" id="instructions">
                        <!-- <div class="card border-dark mb-3" style="margin-top: 30px"> -->
                        <!-- <div class="card-body text-dark"> -->
                        <h3 class="card-title "><b>General Instructions</b></h3>
                        <h6 class="card-title " style="color: firebrick;"><b>Please read the
                                instructions carefully!</b></h6><br>
                        <p class="">
                            The Test requires media permissions from browser,
                            so please allow microphone settings when prompted by the browser.
                            For the research purposes, your audio maybe recorded and used to determine
                            quality of the audio conversation.
                            <br />
                            Please wait for the other person to join, once the person joins you will see a <b
                                style="color: #23C552;">User Joined!</b> notification and a notification sound.
                            Adjust your volume in your device and please use <b>Chrome browser</b> or <b>Firefox
                                browser</b> for taking the test.
                            Please press the call button after the person joins and once you are finished with reading
                            the instructions.
                        </p>
                        <p>
                            During the test you will be given a conversation scenario and Study instructions, please go
                            through the <b>Study instructions</b> before you start the conversation. During the call you
                            have
                            to talk about the scenario and ask questions to the other person in call. Also, you need to
                            answer the questions he ask. Once all the questions and you are done speaking, please click
                            the <b>Hangup button</b> to end the call.
                        </p>
                        <p class="">
                            Please give the feedback for the session after the call. Please select the rating for
                            question about the quality of the call and click
                            submit answer button. After answer is submitted you
                            will be provided with a <b>Verification code</b>, please copy the code and paste it
                            to
                            <b>Amazon Mechanical Turk</b>.
                        </p>
                        <!-- </div> -->
                        <!-- </div> -->
                    </div>

                    <!-- <div class="card border-dark mb-3" style="margin-top: 30px" id="study-instructions" style="height: 100vh"> -->
                    <div id="study-instructions">
                        <h3>Study Instructions</h3>
                        <p>Please go through the study instructions below and once you are in the call you
                            will receive a scenario on what you have to speak about, please answer the questions
                            after having the conversation with each other. And submit the answers before you hangup
                            the call.</p>

                        <!-- </div> -->
                        <div >
                            <iframe id="study-instructions-iframe" src="" frameborder="0"
                                style="overflow:hidden;height:100%;width:100%" height="100%" width="100%"></iframe>
                        </div>
                    </div>

                    <div class="callButton" id="call-button" style="padding-bottom: 20px;">
                        <h5>Call</h5>
                        <button id="callButton" data-toggle="tooltip" data-placement="right" title="Call">
                            <img id="image-call" src="../assets/call-white-48dp.svg" />
                        </button>
                    </div>
                    <audio id="local-audio" controls autoplay muted style="display: none;"></audio>
                    <div class="audio-buttons" id="audio-buttons">
                        <div id="progress"><label>Duration</label>&nbsp;&nbsp;<span id="timer">
                                00:00</span>&nbsp;&nbsp;
                        </div>
                        <div class="hangupButton"><button id="hangupButton" data-toggle="tooltip" data-placement="right"
                                title="Hangup">
                                <img id="image-end" src="../assets/call_end-white-48dp.svg" />
                            </button></div>
                    </div>


                    <!-- <div id="statediv"></div>
                    <td>
                        <div id="div"></div><br>
                        <div id="statsdiv"></div>
                    </td>
                    </tr> -->
                    <!-- Modal verification code -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Thank you for the Participation</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body" id="myModalBody">
                                    <div id="modalBodyMessage">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button id="copy" data-clipboard-target="#verificationCode" class="btn btn-secondary mr-auto">
                                        Copy</button>
                                    <button type="button" id="modalButton" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="callModal" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Incoming Call</h5>
                                </div>
                                <!-- <div class="modal-body" id="myModalBody">
                                    <div id="modalBodyMessage">
                                        Please accept the call to proceed
                                    </div>
                                </div> -->
                                <div class="modal-footer">
                                    <!-- <button id="copy" data-clipboard-target="#verificationCode" class="btn btn-secondary mr-auto">
                                        Copy</button> -->
                                    <button type="button" id="acceptButton" class="btn btn-success"
                                        data-dismiss="modal">Accept</button>
                                    <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="toast ended" role="alert" aria-live="assertive" aria-atomic="true" data-delay="6000"
                        data-animation="true">
                        <div class="toast-header">
                            Call ended!
                            <button type="button" class="close" data-dismiss="toast">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    </div>

                    <section id="scenario-iframe">
                        <div>
                            <form id="scenario-form" class="scenario-form" onsubmit="return false">

                                <div id="caller-iframe" style="height: 100vh;width: 100vw;overflow: hidden;">

                                    <iframe id="caller" src="" style="overflow:hidden;height:100%;width:100%"
                                        height="150%" width="150%" frameborder="0"></iframe>
                                </div>
                                <div id="receiver-iframe" style="height: 100vh;width: 100vw;overflow: hidden;">
                                    <iframe id="receiver" src="" style="overflow:hidden;height:100%;width:100%"
                                        height="150%" width="150%" frameborder="0"></iframe>
                                </div>

                                <div style="text-align: center;" id="scenario-button-div"><button type="submit"
                                        id="scenario-button" onclick="scenarioAnswer()"
                                        class="btn btn-outline-success">Submit</button></div>
                            </form>
                        </div>

                    </section>

                    <div class="feedback card border-light" id="feedback-div">
                        <div class="card-body text-dark">
                            <h2>Feedback about the test</h1>
                                <form id="feedback" class="form-group" onsubmit="return false">
                                    <h5>Please answer the questions below.</h5>
                                    <h6 class="card-title">1. Were you able to follow the test instructions?</h6>

                                    <p><label for="Yes"><input type="radio" name="follow" id="" value="Yes" required />
                                            Yes</label></p>
                                    <p><label for="No"><input type="radio" name="follow" id="" value="No">
                                            No</label></p>

                                    <h6>2. Did the other person in the call stick to given scenarios?</h6>
                                    <p><label for="Yes"><input type="radio" name="out-scope" id="" value="Yes"
                                                required />
                                            Yes</label></p>
                                    <p><label for="No"><input type="radio" name="out-scope" id="" value="No">
                                            No</label></p>

                                    <h6>3. Please give feedback about the session</h6>
                                    <p><textarea rows="4" class="form-control" name="comment" form="feedback"
                                            placeholder="Enter your comments here" required></textarea>
                                        <small id="passwordHelpBlock" class="form-text text-muted">
                                            Please enter feedback on your conversation test and tasks
                                        </small>
                                    </p>
                                    <p><button type="submit" id="feedBackButton" class="btn btn-outline-success"
                                            onclick="feedBackAnswer()">Submit</button></p>
                                </form>
                        </div>
                    </div>
                    <div class="question card border-light " id="question-div">
                        <div class="card-body text-dark">
                            <form id="question" onsubmit="return false">
                                <h3>Rate the Conversation Quality!</h3>
                                <h6 class="card-title">1. How do you rate the
                                    <b>overall quality</b> of the conversation you had?
                                </h6>
                                <table class="table table-borderless" id="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">Quality of the Speech</th>
                                            <th scope="col">Score</th>
                                        </tr>
                                    </thead>
                                    <tbody class="answer-options">
                                        <tr>
                                            <td>
                                                <label for="Excellent"><input type="radio" name="rating" id=""
                                                        value="Excellent" required>
                                                    Excellent</label>
                                            </td>
                                            <td>5</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="Good"><input type="radio" name="rating" id="" value="Good">
                                                    Good</label>
                                            </td>
                                            <td>4</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="Fair"><input type="radio" name="rating" id="" value="Fair">
                                                    Fair</label>
                                            </td>
                                            <td>3</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="Poor"><input type="radio" name="rating" id="" value="Poor">
                                                    Poor</label>
                                            </td>
                                            <td>2</td>
                                        </tr>
                                        <tr>
                                            <td> <label for="Poor"><input type="radio" name="rating" id="" value="Bad">
                                                    Bad</label>
                                            </td>
                                            <td>1</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <button type="submit" id="answerButton" class="btn btn-outline-success"
                                    onclick="ratingAnswer()">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/7.3.0/adapter.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>
        <script src="js/icecandidates.js"></script>
        <script src="js/appTE.js"></script>
</body>

</html>